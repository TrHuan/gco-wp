<?php
/*by WP2Speed.com*/
 class Heartbeat { public $current_screen; public $current_query_string; public $settings = array(); public function __construct() { goto NKzc1; ZRUEG: $settings['rules'] = array(array('heartbeat_control_behavior' => 'modify', 'heartbeat_control_location' => array('admin', 'frontend', '/quanly/post.php'), 'heartbeat_control_frequency' => 300)); goto uFzan; BQwn3: add_action('admin_enqueue_scripts', array($this, 'maybe_disable'), 99); goto HOjWv; uFzan: $this->settings = $settings['rules']; goto BQwn3; U3LUM: gswGL: goto L6rWM; QL_KQ: Tt2f3: goto ZRUEG; NKzc1: if (!empty($_SERVER['QUERY_STRING'])) { goto gswGL; } goto thL9h; Yq3fG: goto A0zUX; goto U3LUM; BZFzc: $this->current_screen = parse_url($current_url); goto ezBDa; HOjWv: add_action('wp_enqueue_scripts', array($this, 'maybe_disable'), 99); goto nmYF0; thL9h: $current_url = $_SERVER['REQUEST_URI']; goto Yq3fG; nmYF0: add_filter('heartbeat_settings', array($this, 'maybe_modify'), 99, 1); goto UDoS1; ezBDa: if (!($this->current_screen == '/wp-admin/admin-ajax.php')) { goto Tt2f3; } goto oHBKh; L6rWM: $current_url = $_SERVER['REQUEST_URI'] . '?' . $_SERVER['QUERY_STRING']; goto tY6IH; tY6IH: A0zUX: goto BZFzc; oHBKh: return; goto QL_KQ; UDoS1: } public function check_location($locations) { goto kw1de; a0bCK: IFcIO: goto sC91o; zBf8H: return false; goto g6YC7; bE2Z3: iSEn9: goto zBf8H; ykNOG: B4rVe: goto NV8zk; IH1Jn: if (!is_admin() && in_array('frontend', $locations)) { goto IFcIO; } goto meQu2; sC91o: return true; goto jFKQ1; meQu2: if (is_admin() && in_array('admin', $locations)) { goto B4rVe; } goto o0whF; kw1de: if (isset($this->current_screen['path']) && in_array($this->current_screen['path'], $locations)) { goto nPbvR; } goto IH1Jn; l40hv: nPbvR: goto ouL_X; NV8zk: return true; goto bE2Z3; o0whF: goto iSEn9; goto l40hv; jFKQ1: goto iSEn9; goto ykNOG; ouL_X: return true; goto tTE1X; tTE1X: goto iSEn9; goto a0bCK; g6YC7: } public function maybe_disable() { foreach ($this->settings as $rule) { goto ST2jX; EMl4A: if (!$this->check_location($rule['heartbeat_control_location'])) { goto kg658; } goto CfTA1; CfTA1: wp_deregister_script('heartbeat'); goto Fl0Ax; dw_t2: a0zyA: goto fRcVX; fRcVX: uCxyS: goto qwxFz; ST2jX: if (!(array_key_exists('heartbeat_control_behavior', $rule) && $rule['heartbeat_control_behavior'] === 'disable')) { goto a0zyA; } goto EMl4A; mZUa8: kg658: goto dw_t2; Fl0Ax: return; goto mZUa8; qwxFz: } je9Mp: } public function maybe_modify($settings) { goto CyJb5; CyJb5: foreach ($this->settings as $rule) { goto DFNa1; l030l: iFrFS: goto znnxm; G1PrD: $settings['interval'] = intval($rule['heartbeat_control_frequency']); goto Qk0HO; cTasY: k8Kg_: goto YQZaV; Qk0HO: return $settings; goto l030l; gF5Gk: if (!$this->check_location($rule['heartbeat_control_location'])) { goto iFrFS; } goto G1PrD; znnxm: a1Gfl: goto cTasY; DFNa1: if (!(array_key_exists('heartbeat_control_behavior', $rule) && $rule['heartbeat_control_behavior'] === 'modify')) { goto a1Gfl; } goto gF5Gk; YQZaV: } goto TmLrW; exny1: return $settings; goto kduGw; TmLrW: eIO9v: goto exny1; kduGw: } } new Heartbeat();