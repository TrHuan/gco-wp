<?php
/*by WP2Speed.com*/
 goto jLht_; jLht_: class HPP_Lazy { private $buffer; private $htmlCommentTokens = array(); public function __construct() { goto zzfuN; OnYun: $this->_setup_hooks(); goto Foznz; zzfuN: $this->buffer = new HPP_OutputBuffer(); goto z2PNX; z2PNX: add_shortcode('load_dynamic_by_js', array($this, 'load_dynamic_by_js')); goto OnYun; Foznz: } function _setup_hooks() { goto pWTDx; cbR0V: add_action('wp_footer', array($this, 'hpp_print_footer_end'), PHP_INT_MAX); goto GXM2N; gb9e6: add_action('wp_enqueue_scripts', array($this, 'enqueue_asset'), PHP_INT_MAX); goto TGrMc; h04zK: add_filter('option_mmr-nocheckcssimports', function ($v) { return 0; }); goto OzkGT; pjX6J: $this->_plugin_hooks(); goto YK_Ow; BFS99: add_action('dynamic_sidebar_before', array($this, 'filter_sidebar_content_start'), 0); goto T65Zt; VZzGH: add_filter('the_excerpt', 'hpp_defer_media', PHP_INT_MAX); goto D69zd; OzkGT: add_filter('should_mmr', 'hpp_shouldlazy'); goto F2gD8; tFk4G: add_filter('get_avatar', 'hpp_defer_imgs'); goto iHMq1; ciNj7: add_filter('get_custom_logo', 'hpp_defer_img_b64', PHP_INT_MAX, 2); goto FGK3p; uxvNo: add_action('init', array($this, '_init'), PHP_INT_MAX); goto rDeif; rDeif: add_action('admin_init', array($this, 'admin_init')); goto F7ciU; dhukK: add_filter('script_loader_tag', array($this, 'script_loader_tag'), PHP_INT_MAX, 4); goto X042y; TGrMc: add_action("wp_ajax_hpp_generate_css", array($this, "ajax_generate_css")); goto NmY38; ZFVhZ: add_filter('wp_video_shortcode', 'hpp_lazy_video', 10); goto m7hKf; alR46: add_filter('option_mmr-outputbuffering', function ($v) { return 0; }); goto JEoh0; anGKf: add_action('admin_enqueue_scripts', array($this, 'hpp_print_scripts'), 0); goto gb9e6; T65Zt: add_action('dynamic_sidebar_after', array($this, 'filter_sidebar_content_end'), PHP_INT_MAX); goto pjX6J; aBXO5: add_action('wp_head', array($this, 'hpp_print_head'), 0); goto wBdKq; BLhRm: add_filter('hpp_lazycss', array($this, 'lazy_css')); goto C4etv; X042y: add_filter('style_loader_tag', array($this, 'style_loader_tag'), PHP_INT_MAX, 4); goto fHej9; F7ciU: add_filter('hpp_prepare_output', array($this, 'wordpress_prepare_output'), PHP_INT_MAX, 1); goto BLhRm; eZOx9: add_filter('wp_kses_allowed_html', array($this, 'add_lazy_load_attributes')); goto YHF3O; C4etv: add_filter('the_content', 'hpp_defer_media', PHP_INT_MAX); goto VZzGH; wBdKq: add_action('wp_head', array($this, 'hpp_print_critical'), apply_filters('hpp_print_critical_priority', 5)); goto cbR0V; fHej9: add_filter('option_mmr-http2push-css', function ($v) { return 1; }); goto fVfNg; iHMq1: add_filter('walker_nav_menu_start_el', 'hpp_defer_imgs', PHP_INT_MAX); goto ZFVhZ; GXM2N: add_action('wp_print_scripts', array($this, 'hpp_print_scripts'), 0); goto anGKf; pWTDx: add_filter('template_include', array($this, 'template_include'), PHP_INT_MAX); goto aBXO5; m7hKf: add_filter('oembed_result', array($this, 'oembed_result'), 10, 3); goto BFS99; fVfNg: add_filter('option_mmr-http2push-js', function ($v) { return 1; }); goto alR46; JEoh0: add_filter('option_mmr-gzip', function ($v) { return 0; }); goto h04zK; jmSpe: add_filter('wp_get_attachment_image_attributes', array($this, 'filter_get_attachment_image_attributes'), PHP_INT_MAX, 3); goto eZOx9; YHF3O: if (!(1 || is_dir(WP_PLUGIN_DIR . '/wp2speed'))) { goto Ft0fb; } goto dhukK; FGK3p: VYr45: goto tFk4G; D69zd: if (!hw_config('logo_base64')) { goto VYr45; } goto ciNj7; F2gD8: Ft0fb: goto uxvNo; NmY38: add_action("wp_ajax_nopriv_hpp_generate_css", array($this, "ajax_generate_css")); goto gz4KB; gz4KB: add_filter('get_image_tag_class', array($this, 'add_image_class'), PHP_INT_MAX); goto jmSpe; YK_Ow: } function _init() { goto Hdcq0; kQ1xA: hpp_reorder_hooks(0, 'wp_print_scripts', 'hpp_print_scripts', 0); goto qjWuS; qjWuS: hpp_reorder_hooks(0, 'admin_enqueue_scripts', 'hpp_print_scripts', 0); goto EIqxS; Hdcq0: hpp_reorder_hooks(0, 'wp_head', 'hpp_print_head', 0); goto IiCbw; IiCbw: hpp_reorder_hooks(PHP_INT_MAX, 'wp_footer', 'hpp_print_footer_end', PHP_INT_MAX); goto kQ1xA; EIqxS: } function _plugin_hooks() { goto lQ5O3; rG2vA: add_filter('woocommerce_single_product_image_thumbnail_html', array($this, 'woocommerce_single_product_image_thumbnail_html'), PHP_INT_MAX, 2); goto Q_KOh; lQ5O3: add_filter('woocommerce_single_product_image_html', array($this, 'woocommerce_single_product_image_html'), PHP_INT_MAX, 2); goto rG2vA; bauWL: add_filter('acf/format_value', array($this, 'acf_load_value'), PHP_INT_MAX, 3); goto eFmRN; Q_KOh: add_filter('woocommerce_short_description', 'hpp_defer_media'); goto bauWL; eFmRN: } public function tokenizeHtmlComments($matches) { goto btlDs; btlDs: $index = count($this->htmlCommentTokens); goto iXxqV; iXxqV: $this->htmlCommentTokens[$index] = $matches[0]; goto Nf1AW; Nf1AW: return '<!--TOKEN' . $index . '-->'; goto DZyq1; DZyq1: } public function restoreHtmlComments($matches) { return $this->htmlCommentTokens[$matches[1]]; } function wordpress_prepare_output($buffer) { goto mKC3U; rvJyk: if (empty($GLOBALS['hpp-lazycss'])) { goto YJ7eX; } goto VFG2x; uce_9: $my_asset = str_replace('\\/', '/', $my_asset[0]) . '}}'; goto qHkdt; ldS5a: $buffer = str_replace('</head>', $style . '</head>', $buffer); goto sa7xU; v71Nm: $inline = ['js' => [], 'css' => []]; goto Ag5RR; sxtB1: VXtoT: goto v71Nm; Phep0: return $buffer; goto NavDf; sE9Jm: if (is_numeric($last_css_id)) { goto VXtoT; } goto wzFcr; Apfcu: foreach ($chunk as $tag) { goto EpFQ2; u3Ag5: XASZv: goto UhPDw; U54qO: goto irF8l; goto G4oDU; CRKBL: JBfl2: goto FY6pZ; s23_3: $open = hw_config_val('debug', 1, "/*{$open}*/", ''); goto dFc3Z; zQrX5: $buffer = str_replace($tg1 . $m4 . ($m4 ? '>' : '') . $m6 . '</style>', $tg1 . $m4 . ($m4 ? '>' : '') . $css . '</style>', $buffer); goto ldHWg; FMykf: $tg = ''; goto Tnw1t; c8tI8: if (empty($att['id'])) { goto EKg1Y; } goto WRMjk; ShZjq: $buffer = str_replace($tag, '', $buffer); goto y03ia; eBN39: $tg = 'style'; goto lhul4; MDNyJ: if (!($tg == 'style' && strpos($tag, 'media="not all"') === false && trim($m6))) { goto yYrza; } goto X0o_O; vgVCJ: goto XASZv; goto nAOHV; zQW_f: if (strpos($merged['js']['log'], $att['src']) !== false) { goto vA5gT; } goto W8WY5; qklV1: if (!($m6 != $js && !hpp_in_str($js, hpp_var('heavy-js', [])))) { goto Xo2rA; } goto s23_3; zyCiy: Xo2rA: goto lqFOh; nd2FZ: $buffer = str_replace($tg1 . $m4 . ($m4 ? '>' : '') . $m6 . '</script>', $tg1 . $m4 . ($m4 ? '>' : '') . $js . '</script>', $buffer); goto T4U0D; o4WE2: Xvx4K: goto A7zE2; lhul4: $tg1 = $tag; goto tOadg; y4LI1: doMPI: goto zQW_f; jN4sO: $buffer = str_replace($tag, HPP_Lazy::defer_asset_html($tag, 'js'), $buffer); goto vgVCJ; Nax4X: goto JBfl2; goto o4WE2; W8WY5: if (apply_filters('hpp_allow_delay_asset', true, $att['src'])) { goto g3JWz; } goto jN4sO; vli9o: yYrza: goto uYKoG; AvzkT: if (!($js != $m6)) { goto hI4iS; } goto nd2FZ; GkDJ0: $open = !apply_filters('hpp_delay_it_script', false, $js) ? '_HWIO.readyjs(function(){' : '_HWIO.readyjs(null,function(){'; goto MLtov; G4oDU: E8tir: goto YZ7aO; RxgLL: FUJMC: goto MDNyJ; y03ia: goto XASZv; goto OFI82; czpRj: $buffer = str_replace($tag, '', $buffer); goto u3Ag5; tOadg: goto ZTgq4; goto BBDbd; FY6pZ: try { $js = apply_filters('hpp_inline_script', $wp2speed->fixOtherJS($js)); } catch (Exception $e) { $js = $wp2speed->fixOtherJS($js); hpp_write_log($e->getMessage()); } goto AvzkT; dFc3Z: $close = hw_config_val('debug', 1, "/*{$close}*/", ''); goto NKFPr; xhJgp: if (!($css != $m6)) { goto garEz; } goto zQrX5; uYKoG: if (!$tg) { goto CgKmZ; } goto FMykf; gB5Xj: $new_assets[$att['id']] = array_merge(['t' => 'js', 'l' => $att['src'], 'extra' => 1], hpp_array_exclude_keys(apply_filters('hpp_delay_asset_att', array_merge($att, ['l' => $att['src']]), 'js'), ['src', 'id', 'type'])); goto czpRj; lqFOh: $js = "{$open}{$js}{$close}"; goto m2G9c; fdHB1: $m6 = $m4 ? substr($tag, strlen($m4) + 1) : $tag; goto wTMNT; gvo74: $att['id'] = md5($att['src']); goto y4LI1; Tnw1t: CgKmZ: goto oYExx; Upf7z: goto doMPI; goto gJZzl; MLtov: $close = '})'; goto qklV1; WRMjk: if (!hpp_endsWith($att['id'], '-js')) { goto Cj6to; } goto RKx0p; RKx0p: $att['id'] = substr($att['id'], 0, -3); goto cumc2; m2G9c: DZf_e: goto CRKBL; OFI82: g3JWz: goto gB5Xj; s0bh3: irF8l: goto RxgLL; bWrhs: if (!(0 && $tg == 'script' && !hpp_in_str($m4, hpp_var('script-type')))) { goto FUJMC; } goto DSJ2O; gJZzl: EKg1Y: goto gvo74; nAY7b: $att = hpp_dom_attr($tag, [], 'script'); goto bPARu; oYExx: ZTgq4: goto vpU7V; A7zE2: $js = hpp_fix_script_variables($m6); goto Fbvga; a2BmY: muwMc: goto U54qO; bbHdB: if (!in_array($tg, ['style', 'script'])) { goto Fh649; } goto GmwqK; ldHWg: garEz: goto vli9o; nAOHV: vA5gT: goto ShZjq; EpFQ2: if (!(strpos($tag, '<style') === 0)) { goto zaCPA; } goto eBN39; T4U0D: hI4iS: goto a2BmY; wTMNT: Fh649: goto bWrhs; GmwqK: $m4 = hpp_endsWith($tg1, '>') ? '' : substr($tag, 0, strpos($tag, '>')); goto fdHB1; UhPDw: keyRz: goto s0bh3; BBDbd: zaCPA: goto bbHdB; O7J33: if (apply_filters('hpp_allow_readyjs', true, $m6)) { goto Xvx4K; } goto yU_mE; YZ7aO: $tag = '<script ' . $tag . '</script>'; goto nAY7b; sGZmO: if (!(strpos($m4, ' src=') === false && trim($m6) != '' && !hpp_in_str($m6, ['var _HWIO=', '_HWIO.extra_assets=']))) { goto muwMc; } goto O7J33; Fbvga: if (hpp_in_str($m6, ['_HWIO.readyjs('])) { goto DZf_e; } goto GkDJ0; DSJ2O: if (strpos($m4, ' src=') !== false && strpos($m4, $path_me) === false) { goto E8tir; } goto sGZmO; bPARu: if (!(1 || strpos($my_asset, $att['src']) === false)) { goto keyRz; } goto c8tI8; cumc2: Cj6to: goto Upf7z; X0o_O: try { $css = hpp_fix_stylesheet(apply_filters('hpp_inline_style', $m6)); } catch (Exception $e) { $css = hpp_fix_stylesheet($m6); hpp_write_log($e->getMessage()); } goto xhJgp; NKFPr: $js = $m6; goto zyCiy; yU_mE: $js = $m6; goto Nax4X; vpU7V: } goto XLBaH; sa7xU: $GLOBALS['hpp-lazycss'] = ''; goto Zct6I; GJPna: PPDUB: goto qzEvk; YDJJC: return $buffer; goto sqYUk; Ag5RR: $new_assets = []; goto dgP0k; QdM7l: return $buffer; goto vXfiE; VFG2x: $style = '<style ' . hpp_gen_critical_context('', 'media="not all"') . '>' . apply_filters('hpp_lazycss', $GLOBALS['hpp-lazycss']) . '</style>'; goto ldS5a; hhQis: $head_0 = preg_replace_callback('#<script(((?!>).)*)?>(.*?)<\\/script>#si', function ($m) use(&$scripts) { $scripts[] = $m[0]; return ''; }, $head[0]); goto VNsGz; DesOS: D0YVK: goto gaqas; doXUl: global $wp2speed; goto C6C23; PMs9Q: $buffer = preg_replace_callback('/<!--.*?-->/s', array($this, 'tokenizeHtmlComments'), $buffer); goto RN5nD; oFeNR: $f = 'custom.js",' . array_pop($ar) . ');'; goto hhacf; XLBaH: SxRtf: goto GbL5Z; mKC3U: if (hpp_shouldlazy()) { goto cxUz6; } goto QdM7l; q4Utz: $head = explode('{{hpp_critical}}', $parts[0]); goto EaPLe; VNsGz: $buffer = str_replace($parts[0], str_replace($head[0], $head_0, $parts[0]), $buffer); goto A0WU3; jWwCm: $buffer = str_replace('{{hpp_critical}}', $GLOBALS['hpp-head-critical'] . $GLOBALS['hpp-head-js'] . join('', $scripts), $buffer); goto PMs9Q; GbL5Z: preg_match_all('#<link(((?!>).)* )rel=(.*?)>|<script(((?!>).)*)?>(.*?)<\\/script>|<noscript>(.*?)<\\/noscript>#si', $buffer, $m); goto huQj7; jNrQR: $buffer = apply_filters('hpp_prepare_buffer_html', $buffer, $merged); goto FXh3C; c5cGD: $ar = explode('<script id="hqjs">', $buffer); goto MAMl1; YDQm4: if (!(count($parts) < 2)) { goto Lg0h8; } goto Phep0; NavDf: Lg0h8: goto Mlp61; vXfiE: cxUz6: goto doXUl; rC5jc: $my_asset = explode('}});', $my_asset[1]); goto uce_9; k11L2: zX0zU: goto rZ0L9; wbzHl: $buffer = preg_replace_callback('/<!--TOKEN([0-9]+)-->/', array($this, 'restoreHtmlComments'), $buffer); goto rvJyk; dgP0k: $merged = $wp2speed->get_processed_scripts(); goto itu18; PLG9r: $tg1 = $tg = ''; goto Apfcu; v2X_P: $merged['css']['log'] = join("\n", $merged['css']['log']); goto jNrQR; A0WU3: AsY1x: goto jWwCm; huQj7: foreach ($m[0] as $i => $tag) { goto rILzo; EExhX: $inline['js'][] = hw_config_val('test', 1, '/*[script' . $m[4][$i] . ']*/', '') . 'try{' . $js . '}catch(e){console.log(e)}'; goto m34yT; rHpTH: $att['media'] = 'all'; goto hYUOe; kZt2g: if (empty($att['id'])) { goto hCLZ1; } goto dD_9o; Sv4Aq: if (isset($att['media'])) { goto GUq3k; } goto rHpTH; jdovf: giBZx: goto D1zEZ; bdX8W: $att['id'] = substr($att['id'], 0, -4); goto yRGQL; b_Xsa: OO6WI: goto k_uGh; RpzEp: if (!($m[6][$i] != $js && !hpp_in_str($js, hpp_var('heavy-js', [])))) { goto mevGV; } goto Gx1is; xSM03: zMhJO: goto Sv3m0; ld_4t: hD5dH: goto UBrn_; ZJl4f: mevGV: goto pFJxE; OE_4_: Fw8GW: goto IFTwQ; CQqh1: $js = $m[6][$i]; goto ZJl4f; vMiX1: goto RnEIH; goto E_xbi; YzmDY: if (empty($att['href'])) { goto tf4AW; } goto kZt2g; tx8R2: goto WMM30; goto jdovf; BvMDh: $close = '})'; goto RpzEp; Y2xwl: JiZD7: goto vMiX1; p9cl2: $new_assets[$att['id']] = array_merge(['t' => 'js', 'l' => $att['src'], 'extra' => 1], hpp_array_exclude_keys(apply_filters('hpp_delay_asset_att', array_merge($att, ['l' => $att['src']]), 'js'), ['src', 'id', 'type'])); goto D8XLE; D8XLE: $buffer = str_replace($tag, '', $buffer); goto xSM03; rV6Qg: $js = hpp_fix_script_variables($m[6][$i]); goto J1mvq; AWhJt: RnEIH: goto Urq89; yjYnS: $noscript_0 = $noscript_1 = $m[7][$i]; goto eHm7d; D1zEZ: try { $js = apply_filters('hpp_inline_script', $wp2speed->fixOtherJS($m[6][$i])); } catch (Exception $e) { $js = $wp2speed->fixOtherJS($m[6][$i]); hpp_write_log($e->getMessage()); } goto EExhX; TS_pb: if (apply_filters('hpp_allow_delay_asset', true, $att['href'])) { goto rcj_3; } goto MNAiy; SUxUh: $buffer = str_replace($tag, '', $buffer); goto BYrcs; E_xbi: M9Z3g: goto yBasx; y1Nos: $noscript_1 = str_replace('[/noscript]', '</noscript>', $noscript_1); goto Qsv2Q; OHFgr: lsBcS: goto rV6Qg; hYUOe: GUq3k: goto PIdT5; XoGwj: $att['id'] = md5($att['href']); goto ryD45; dTB10: if (apply_filters('hpp_allow_merge_inline', true, $m[6][$i], 'js')) { goto giBZx; } goto b58FQ; iqDv7: hCLZ1: goto XoGwj; AiO_L: foreach ($m1[0] as $_tag) { goto npPlc; VBT77: LoAQ9: goto Ft49S; c5jFN: if (!(stripos($_tag, '</style>') !== false && stripos($m1[4][$i], ' media="not all"') === false)) { goto qEydU; } goto p0tqw; Yr131: if (apply_filters('hpp_allow_delay_asset', true, $att['href'])) { goto vg8Je; } goto ocy2f; OsAu9: goto UB9Nq; goto uspkL; qvcwR: $att = hpp_dom_attr($_tag, [], 'link'); goto vCBsZ; JTE6p: MFXiW: goto yx1_5; VDv0z: ksEGq: goto fmNSS; p0tqw: try { $css = hpp_fix_stylesheet(apply_filters('hpp_inline_style', $m1[6][$i])); } catch (Exception $e) { $css = hpp_fix_stylesheet($m1[6][$i]); hpp_write_log($e->getMessage()); } goto Kzr5b; AVKZw: if (isset($att['media'])) { goto SMCHA; } goto cEKyt; Rul0N: $new_assets['hpp-s-' . $last_css_id] = array_merge(['t' => 'css', 'l' => $att['href'], '_id' => $att['id'], 'extra' => 1], hpp_array_exclude_keys(apply_filters('hpp_delay_asset_att', array_merge($att, ['l' => $att['href']]), 'css'), ['href', 'rel', 'id'])); goto Sx5j4; cjABa: vg8Je: goto OHchC; YXjCm: UB9Nq: goto IWfn7; SDSHV: goto Paodv; goto VDv0z; B2_GR: if (strpos($noscript_1, '</noscript>') === false) { goto MFXiW; } goto v_5BT; cEKyt: $att['media'] = 'all'; goto hVyEC; yx1_5: $noscript_1 = str_replace($_tag, $_tag . '[/noscript]', $noscript_1); goto PtHjn; uspkL: KiedH: goto hpKt7; fmNSS: $noscript_1 = str_replace($_tag, '', $noscript_1); goto itaM0; PYo8l: goto TOZUo; goto JTE6p; tjPGv: gK4sY: goto GmmYU; OHchC: $last_css_id++; goto Rul0N; Ft49S: qEydU: goto tjPGv; npPlc: if (!(stripos($_tag, '<link ') !== false)) { goto V2PsN; } goto qvcwR; IWfn7: V2PsN: goto c5jFN; IKQoA: elxAa: goto AVKZw; v_5BT: $noscript_1 = str_replace($_tag, '', $noscript_1); goto PYo8l; Kzr5b: if (!($css != $m1[6][$i])) { goto LoAQ9; } goto V2vTJ; ocy2f: $noscript_1 = str_replace($_tag, HPP_Lazy::defer_asset_html($_tag, 'css'), $noscript_1); goto SDSHV; PtHjn: TOZUo: goto OsAu9; x_N4H: $att['id'] = md5($att['href']); goto IKQoA; Sx5j4: $noscript_1 = str_replace($_tag, '', $noscript_1); goto Hw9va; vCBsZ: if (strpos($my_asset, $att['href']) === false) { goto KiedH; } goto B2_GR; itaM0: goto Paodv; goto cjABa; hpKt7: if (isset($att['id'])) { goto elxAa; } goto x_N4H; aOasQ: if (strpos($merged['css']['log'], $att['href']) !== false) { goto ksEGq; } goto Yr131; Hw9va: Paodv: goto YXjCm; hVyEC: SMCHA: goto aOasQ; V2vTJ: $noscript_1 = str_replace('<style' . $m1[4][$i] . '>' . $m1[6][$i] . '</style>', '<style' . $m1[4][$i] . '>' . $css . '</style>', $noscript_1); goto VBT77; GmmYU: } goto GbiZe; uksrH: tf4AW: goto GQVvq; BYrcs: J12zg: goto uksrH; J1mvq: if (hpp_in_str($m[6][$i], ['_HWIO.readyjs('])) { goto zCcTr; } goto dfwfo; HTQxD: SZ428: goto tx8R2; If1De: aHq6L: goto B53Vr; rflKd: goto CFLA5; goto OHFgr; yRGQL: i2WCX: goto KJKI3; Ifgcj: $buffer = str_replace($noscript_0, $noscript_1, $buffer); goto OE_4_; H0hrW: if (strpos($m[4][$i], ' src=') !== false && strpos($m[4][$i], $path_me) === false) { goto ZD4yw; } goto G6VYB; bHAyu: goto J12zg; goto b_Xsa; dD_9o: if (!hpp_endsWith($att['id'], '-css')) { goto i2WCX; } goto bdX8W; GaT35: CFLA5: goto Hc_8K; bpStA: if (!hpp_endsWith($att['id'], '-js')) { goto JiZD7; } goto de9Dx; GbiZe: rJ0b2: goto K1r_g; IFTwQ: VVbfm: goto FIlQy; PIdT5: if (strpos($merged['css']['log'], $att['href']) !== false) { goto OO6WI; } goto TS_pb; g8g_x: if (!(stripos($tag, '</noscript>') !== false)) { goto lUDOE; } goto yjYnS; Urq89: if (strpos($merged['js']['log'], $att['src']) !== false) { goto SmdSh; } goto OW060; ia4_0: goto zMhJO; goto MIybp; m7Vg8: if (!($js != $m[6][$i])) { goto SZ428; } goto TJ2ks; XORlH: $att = hpp_dom_attr($tag, [], 'script'); goto vFzyh; Kq79u: if (!($css != $m[9][$i])) { goto gt4P7; } goto c6Sr8; yBasx: $att['id'] = md5($att['src']); goto AWhJt; ujsJ3: $buffer = str_replace($tag, '', $buffer); goto ia4_0; mldlp: $new_assets['hpp-s-' . $last_css_id] = array_merge(['t' => 'css', 'l' => $att['href'], '_id' => $att['id'], 'extra' => 1], hpp_array_exclude_keys(apply_filters('hpp_delay_asset_att', array_merge($att, ['l' => $att['href']]), 'css'), ['href', 'rel', 'id'])); goto SUxUh; kAWdH: goto zMhJO; goto ppHQe; Oyr1P: if (!(0 && stripos($tag, '</style>') !== false && strpos($tag, 'media="not all"') === false && trim($m[9][$i]))) { goto fb5Yn; } goto a2QWv; k_uGh: $buffer = str_replace($tag, '', $buffer); goto c0lqX; Qsv2Q: KQ3zq: goto Ifgcj; eHm7d: if (!(substr_count($noscript_0, '<link ') > 1 || hpp_in_str($noscript_0, ['<link', '<style'], 1))) { goto VVbfm; } goto SndtW; xttSe: if (empty($att['id'])) { goto M9Z3g; } goto bpStA; K1r_g: if (!(strpos($noscript_1, '[/noscript]') !== false)) { goto KQ3zq; } goto zloYH; ydwdA: WMM30: goto ld_4t; dO2HS: $js = $m[6][$i]; goto rflKd; vFzyh: if (!(1 || strpos($my_asset, $att['src']) === false)) { goto LrxsX; } goto xttSe; c0lqX: goto J12zg; goto FmHNJ; JiWa_: $buffer = str_replace($tag, HPP_Lazy::defer_asset_html($tag, 'js'), $buffer); goto kAWdH; ppHQe: SmdSh: goto ujsJ3; a2QWv: $css = hpp_fix_stylesheet(apply_filters('hpp_inline_style', $m[9][$i])); goto Kq79u; G6VYB: if (!(strpos($m[4][$i], ' src=') === false && trim($m[6][$i]) != '' && !hpp_in_str($m[6][$i], ['var _HWIO=', '_HWIO.extra_assets=']))) { goto hD5dH; } goto dTB10; Sv3m0: LrxsX: goto If1De; MNAiy: $buffer = str_replace($tag, HPP_Lazy::defer_asset_html($tag, 'css'), $buffer); goto bHAyu; SndtW: preg_match_all('#<link(((?!>).)* )rel=(.*?)>|<style(((?!>).)*)?>(.*?)<\\/style>#si', $noscript_0, $m1); goto z6dOp; B53Vr: Suw51: goto Oyr1P; z6dOp: if (!(count($m1[0]) > 1)) { goto Fw8GW; } goto AiO_L; m34yT: $buffer = str_replace('<script' . $m[4][$i] . '>' . $m[6][$i] . '</script>', '', $buffer); goto ydwdA; b58FQ: if (apply_filters('hpp_allow_readyjs', true, $m[6][$i])) { goto lsBcS; } goto dO2HS; de9Dx: $att['id'] = substr($att['id'], 0, -3); goto Y2xwl; MIybp: KKK7g: goto p9cl2; Hc_8K: try { $js = apply_filters('hpp_inline_script', $wp2speed->fixOtherJS($js)); } catch (Exception $e) { hpp_write_log($e->getMessage()); $js = $wp2speed->fixOtherJS($js); } goto m7Vg8; BWrgI: fb5Yn: goto g8g_x; KJKI3: goto duZBj; goto iqDv7; KNZ30: $close = hw_config_val('debug', 1, "/*{$close}*/", ''); goto CQqh1; dfwfo: $open = !apply_filters('hpp_delay_it_script', false, $js) ? '_HWIO.readyjs(function(){' : '_HWIO.readyjs(null,function(){'; goto BvMDh; ryD45: duZBj: goto Sv4Aq; Kevum: J7MGi: goto Rk_9z; zloYH: $buffer = str_replace($tag, str_replace('</noscript>', '', $tag), $buffer); goto y1Nos; rILzo: if (!(stripos($tag, '<link ') !== false && stripos($tag, '<noscript>') === false && hpp_in_str($tag, ['stylesheet', 'text/css']) && strpos($tag, $path_me) === false)) { goto zXze_; } goto wWX1u; c6Sr8: $buffer = str_replace($m[9][$i], $css, $buffer); goto PzLTL; AEv0p: $last_css_id++; goto mldlp; yoX2v: if (!(stripos($tag, '</script>') !== false && !hpp_in_str($m[4][$i], hpp_var('script-type')))) { goto Suw51; } goto H0hrW; Gx1is: $open = hw_config_val('debug', 1, "/*{$open}*/", ''); goto KNZ30; k0z7v: ZD4yw: goto XORlH; pqJtO: zCcTr: goto GaT35; OW060: if (apply_filters('hpp_allow_delay_asset', true, $att['src'])) { goto KKK7g; } goto JiWa_; PzLTL: gt4P7: goto BWrgI; TJ2ks: $buffer = str_replace('<script' . $m[4][$i] . '>' . $m[6][$i] . '</script>', '<script' . $m[4][$i] . '>' . $js . '</script>', $buffer); goto HTQxD; FIlQy: lUDOE: goto Kevum; wWX1u: $att = hpp_dom_attr($tag, [], 'link'); goto YzmDY; UBrn_: goto aHq6L; goto k0z7v; FmHNJ: rcj_3: goto AEv0p; GQVvq: zXze_: goto yoX2v; pFJxE: $js = "{$open}{$js}{$close}"; goto pqJtO; Rk_9z: } goto k11L2; EaPLe: $scripts = []; goto XCS4u; sqYUk: FMqqq: goto rC5jc; bhKd9: $ar = explode('custom.js",', $my_asset); goto oFeNR; Zct6I: YJ7eX: goto AM5cE; rZ0L9: $buffer = hpp_defer_media_large($buffer); goto wbzHl; MAMl1: $buffer = $ar[0] . '<script type="text/javascript">' . apply_filters('hpp_merge_inline', '' . join("\n", $inline['js']) . '', 'js') . '</script><script id="hqjs">' . $ar[1]; goto GJPna; qHkdt: preg_match_all('#"hpp-s-\\d+"#s', $my_asset, $m); goto AgsqS; wzFcr: $last_css_id = 20; goto sxtB1; XCS4u: if (!(strpos($head[0], '<script') !== false)) { goto AsY1x; } goto hhQis; FXh3C: $parts = preg_split('/<\\/head[\\s]*>/i', $buffer, 2); goto YDQm4; hhacf: $buffer = str_replace($f, $f . '_HWIO.extra_assets=_HWIO.assign(_HWIO.extra_assets,' . json_encode(apply_filters('hpp_lazy_assets', $new_assets)) . ');', $buffer); goto DesOS; ktJgu: $my_asset = str_replace('/', '\\/', $my_asset); goto bhKd9; AgsqS: $last_css_id = trim(str_replace(',"hpp-s-', '', $m[0][count($m[0]) - 1]), '"'); goto sE9Jm; Mlp61: $path_me = trim(str_replace([WP_SITEURL, 'http://', 'https://'], '', MMR_CACHE_URL), '/'); goto q4Utz; nKShP: return $buffer; goto ak4kW; C6C23: $my_asset = explode('_HWIO.extra_assets=_HWIO.assign(_HWIO.assets,', $buffer); goto DfTBk; RN5nD: $chunk = preg_split('#(<style>|<style |<\\/style>)#si', $buffer, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto PLG9r; qzEvk: if (!count($new_assets)) { goto D0YVK; } goto ktJgu; AM5cE: if (!count($inline['js'])) { goto PPDUB; } goto c5cGD; itu18: $merged['js']['log'] = join("\n", $merged['js']['log']); goto v2X_P; DfTBk: if (isset($my_asset[1])) { goto FMqqq; } goto YDJJC; gaqas: $buffer = apply_filters('hpp_after_buffer_html', $buffer); goto nKShP; ak4kW: } function enqueue_asset() { goto pRZNH; hCqmL: wp_enqueue_style('hpp-style', HS_PLUGIN_URL . '/lib/asset/style.css'); goto jPuL7; jPuL7: qYf5b: goto YrzgF; pRZNH: if (!hpp_shouldlazy()) { goto qYf5b; } goto hCqmL; YrzgF: } function lazy_css($css) { global $wp2speed; return $wp2speed->fixCSS($css); } function _all_options($alloptions) { goto KFxEE; cmOsB: return $alloptions; goto OM07R; V2bdO: $GLOBALS['hpp-init-options'] = 1; goto K22II; K22II: if (hpp_shouldlazy()) { goto os1Lo; } goto wFBsL; wFBsL: return $alloptions; goto aGeIJ; kJ5rs: foreach ($keys as $k) { goto vL1ic; vL1ic: if (hpp_in_str($k, array('mmr-', '_transient', 'action_scheduler', 'ActionScheduler'))) { goto hIAnT; } goto UPAOw; g4dlX: hIAnT: goto zj6ps; UPAOw: add_filter('option_' . $k, array($this, 'hpp_fix_option_value'), PHP_INT_MAX, 2); goto g4dlX; zj6ps: tuxO1: goto eBUTV; eBUTV: } goto ux2KN; KFxEE: if (!(function_exists('is_user_logged_in') && !isset($GLOBALS['hpp-init-options']))) { goto po9kI; } goto V2bdO; f15Sy: po9kI: goto cmOsB; ux2KN: B62cF: goto l32bF; JsXHc: $keys = array_keys($alloptions); goto kJ5rs; UnYXl: $defOpts = 'siteurl,'; goto JsXHc; aGeIJ: os1Lo: goto UnYXl; l32bF: remove_filter('alloptions', array($this, __FUNCTION__)); goto f15Sy; OM07R: } function hpp_fix_option_value($value, $option) { goto WIGFq; iJAVV: $cache[$option] = hpp_defer_option($value); goto xK1Tt; WIGFq: static $cache = array(); goto OdR9m; QrIq9: JvX_o: goto iJAVV; OFlBT: return $cache[$option]; goto QrIq9; OdR9m: if (!isset($cache[$option])) { goto JvX_o; } goto OFlBT; xK1Tt: return $cache[$option]; goto rqUla; rqUla: } function acf_load_value($value, $post_id, $field) { goto pm2jZ; T5oNt: return $cache[$key]; goto rZSgG; pm2jZ: static $cache = []; goto G4mBN; kLDBv: $cache[$key] = hpp_defer_option($value); goto T5oNt; kitmS: return $cache[$key]; goto u3Hfi; u3Hfi: qBJy2: goto kLDBv; G4mBN: $key = $post_id . $field['name']; goto EGB0v; EGB0v: if (!isset($cache[$key])) { goto qBJy2; } goto kitmS; rZSgG: } function get_criticalcss_path() { goto c1S1Q; QU0nj: OevvO: goto alaNi; yvD8q: $id = is_multisite() && $blog_id > 1 ? $blog_id . '-' : ''; goto JYe_T; lx9tU: $file .= '-home'; goto QU0nj; o09Za: if ($file) { goto hPsvB; } goto zQrNM; lj9Aq: return hpp_gen_critical_context('', $file); goto oGlbC; t_pIq: yTNXE: goto YlG0r; FbvBn: $GLOBALS['hpp-criticalfont'] = $file_font; goto t_pIq; yfRwq: $suffix = array(''); goto bySj5; G8Ywb: $GLOBALS['hpp-criticalname'] .= '-' . md5($uri); goto L7mG_; ezoQg: FD7XV: goto yfRwq; YlG0r: $GLOBALS['hpp-criticalfile'] = $file = apply_filters(__FUNCTION__, $file, $uri); goto YkVDH; eeoSb: $file .= '-' . get_queried_object()->taxonomy; goto kXRIX; kkmvQ: array_unshift($suffix, '.mobile'); goto B9Okx; c1S1Q: static $file; goto o09Za; zQrNM: global $blog_id; goto yvD8q; VMkSZ: if (!file_exists($main_css)) { goto k1iW3; } goto wzYYm; g0Lyd: if (!(is_home() || is_front_page())) { goto OevvO; } goto lx9tU; L7mG_: if (!isset($file_font)) { goto yTNXE; } goto FbvBn; wkNNR: $file .= '-' . get_post_type(); goto ef4NF; HLgJh: $uri = preg_replace('#\\?.+#', '', $_SERVER['REQUEST_URI']); goto QADPE; dD2kP: wAQSP: goto G8Ywb; bySj5: if (!wp_is_mobile()) { goto SJE24; } goto kkmvQ; kXRIX: mvQds: goto g0Lyd; JYe_T: $upload_dir = wp_upload_dir(); goto x0Y0k; B9Okx: SJE24: goto YmsKU; cTFqr: if (is_tax() || is_category() || is_tag()) { goto oghB5; } goto wkNNR; wzYYm: $GLOBALS['hpp-uncritical'] = $upload_dir['baseurl'] . '/critical-css/' . basename($file, '.css') . '-main.css'; goto vquW5; IPWxt: hPsvB: goto lj9Aq; ef4NF: goto mvQds; goto g80yt; vquW5: k1iW3: goto IPWxt; YmsKU: foreach ($suffix as $sf) { goto DQiRN; b1Fgp: $file .= '-' . md5($uri) . $sf; goto rrloC; yy52M: $file .= '.css'; goto lKWFr; lKWFr: goto wAQSP; goto CKtml; gbEh4: JWYZF: goto yy52M; rzcT3: J47LC: goto b1Fgp; qrXAT: vLST_: goto TkXxZ; DQiRN: if (file_exists($file . '-' . md5($uri) . $sf . '.css')) { goto J47LC; } goto EcfSm; CKtml: sXVif: goto Fc101; zcDX3: $file_font = $file . '-font.css'; goto gbEh4; Fj49l: goto sXVif; goto rzcT3; DrHD0: goto wAQSP; goto Llkhc; Fc101: Gvaqp: goto PYmwB; KNyIE: if (!file_exists($file . '-font.css')) { goto JWYZF; } goto zcDX3; Th6Mp: $file_font = $file . '-font.css'; goto qrXAT; EcfSm: if (file_exists($file . $sf . '.css')) { goto utbJe; } goto Fj49l; TkXxZ: $file .= '.css'; goto DrHD0; Llkhc: goto sXVif; goto xXWxx; rrloC: if (!file_exists($file . '-font.css')) { goto vLST_; } goto Th6Mp; xXWxx: utbJe: goto kVSUx; kVSUx: $file .= $sf; goto KNyIE; PYmwB: } goto dD2kP; x0Y0k: $file = $upload_dir['basedir'] . '/critical-css/' . $id . $GLOBALS['hpp-tplname']; goto cTFqr; alaNi: $GLOBALS['hpp-criticalname'] = basename($file); goto HLgJh; GKOFg: $uri = preg_replace('#\\/(' . apply_filters('hpp_url_langs', 'en|vi') . ')\\/#', '/', $uri); goto ezoQg; YkVDH: $main_css = $upload_dir['basedir'] . '/critical-css/' . basename($file, '.css') . '-main.css'; goto VMkSZ; g80yt: oghB5: goto eeoSb; QADPE: if (!hw_config('same_css_lang')) { goto FD7XV; } goto GKOFg; oGlbC: } function load_dynamic_by_js($atts, $content = null) { goto dbxDv; b6JTB: return load_dynamic_by_js($name, function () use($content) { echo $content; }); goto zE_Kz; dbxDv: $name = isset($atts['name']) ? $atts['name'] : ''; goto hV6vI; zE_Kz: c7UiV: goto Vz6dO; hV6vI: if (!$name) { goto c7UiV; } goto b6JTB; Vz6dO: } public function add_lazy_load_attributes($allowedposttags) { goto MlsPg; DaR03: $allowedposttags['img'] = $img_attributes; goto wIXJD; wIXJD: return $allowedposttags; goto U93AI; p7eJB: $img_attributes = array_merge($allowedposttags['img'], $attributes); goto DaR03; M7SfR: F162F: goto ArnMF; kJIsg: return $allowedposttags; goto M7SfR; MlsPg: if (isset($allowedposttags['img'])) { goto F162F; } goto kJIsg; ArnMF: $attributes = array('data-src' => true, 'data-srcset' => true); goto p7eJB; U93AI: } function template_include($file) { goto nm_5g; gPq2g: return $file; goto g1rm_; npZT1: cpt1t: goto gPq2g; sTxz8: $file = dirname(__DIR__) . '/template/tpl-dynamic-content.php'; goto npZT1; nm_5g: $GLOBALS['hpp-tplname'] = basename($file, '.php'); goto ezK3v; ezK3v: if (!isset($_GET['hpp_next'])) { goto cpt1t; } goto sTxz8; g1rm_: } function hpp_print_head_end() { goto AIV3m; AIV3m: $out = ob_get_contents(); goto XGVlu; mANxW: echo hpp_delay_assets($out); goto DJ1YG; XGVlu: ob_end_clean(); goto mANxW; DJ1YG: } function hpp_print_critical() { goto VeIzB; VeIzB: if (!hpp_shouldlazy()) { goto X3QJ0; } goto vn__E; NKHCY: X3QJ0: goto jVARl; vn__E: echo '{{hpp_critical}}'; goto NKHCY; jVARl: } function hpp_print_head() { goto eqfj3; c2z2m: $initjs = ob_get_clean(); goto plWhF; i52m1: echo <<<EOF
      <script>
      !function(){var i,t,n=document.attachEvent,o=!1;if(!n){var e=(t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)},function(e){return t(e)}),r=(i=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(e){return i(e)});function a(e){var i=e.__resizeTriggers__,t=i.firstElementChild,r=i.lastElementChild,s=t.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,s.style.width=t.offsetWidth+1+"px",s.style.height=t.offsetHeight+1+"px",t.scrollLeft=t.scrollWidth,t.scrollTop=t.scrollHeight}function _(i){var t=this;a(this),this.__resizeRAF__&&r(this.__resizeRAF__),this.__resizeRAF__=e(function(){var e;(e=t).offsetWidth==e.__resizeLast__.width&&e.offsetHeight==e.__resizeLast__.height||(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach(function(e){e.call(t,i)}))})}var s=!1,d="",l="animationstart",c="Webkit Moz O ms".split(" "),m="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),g="",h=document.createElement("fakeelement");if(void 0!==h.style.animationName&&(s=!0),!1===s)for(var f=0;f<c.length;f++)if(void 0!==h.style[c[f]+"AnimationName"]){g=c[f],d="-"+g.toLowerCase()+"-",l=m[f],s=!0;break}var z="resizeanim",v="@"+d+"keyframes "+z+" { from { opacity: 0; } to { opacity: 0; } } ",u=d+"animation: 1ms "+z+"; "}window.addResizeListener=function(i,e){var t,r,s;n?i.attachEvent("onresize",e):(i.__resizeTriggers__||("static"==getComputedStyle(i).position&&(i.style.position="relative"),o||(t=(v||"")+".resize-triggers { "+(u||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',r=document.head||document.getElementsByTagName("head")[0],(s=document.createElement("style")).type="text/css",s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t)),r.appendChild(s),o=!0),i.__resizeLast__={},i.__resizeListeners__=[],(i.__resizeTriggers__=document.createElement("div")).className="resize-triggers",i.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',i.appendChild(i.__resizeTriggers__),a(i),i.addEventListener("scroll",_,!0),l&&i.__resizeTriggers__.addEventListener(l,function(e){e.animationName==z&&a(i)})),i.__resizeListeners__.push(e))},window.removeResizeListener=function(e,i){n?e.detachEvent("onresize",i):(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(i),1),e.__resizeListeners__.length||(e.removeEventListener("scroll",_),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)))}}();
      addEventListener('load', () => {
        new PerformanceObserver(function(list){for (const entry of list.getEntries()) {console.log(entry.value,entry)}}).observe({type: 'layout-shift', buffered: true});
        /*var track=[];
  document.querySelectorAll('body *').forEach((el)=>{
    addResizeListener(el, function (e) {
      if(1 && track.indexOf(this)===-1) track.push(this);
      else console.log(this)
    });
  })*/
      })
</script>
EOF;
goto HuZcH; dFBgc: ob_start(); goto lKZe3; LdsRQ: ob_start(); goto E0fn5; qBjWL: $attr .= ' data-unique="' . ($uniq ? 1 : 0) . '"'; goto lNwJo; gIl5n: if (!(0 && !hpp_shouldlazy())) { goto Iz3Y7; } goto kRfvc; q8bBK: $uniq = !wp_is_mobile() ? file_exists($upload_dir['basedir'] . '/critical-css/' . $GLOBALS['hpp-criticalname'] . '.css') : file_exists($upload_dir['basedir'] . '/critical-css/' . $GLOBALS['hpp-criticalname'] . '.mobile.css'); goto qBjWL; kRfvc: echo '<script>_HWIO.__readyjs=1;_HWIO._addjs=function(t,e){if(_HWIO.data._script_||(_HWIO.data._script_={},document.querySelectorAll("script[src]").forEach(function(t){var e=t.getAttribute("src");e&&(_HWIO.data._script_[e]=1)})),_HWIO.data._script_[t])return console.log("%c exist js "+t,"color:red");var r,c,a,n,s;r=document,c="script",a=e||Math.random(),window,s=(s=r.getElementsByTagName(c))[s.length-1],r.getElementById(a)||((n=r.createElement(c)).id=a,n.async=0,n.src=t,s.parentNode.insertBefore(n,s))};'; goto zGLnY; FEn34: u5meh: goto RbjoO; lNwJo: GXvUb: goto Tj2SL; Gjq7w: do_action('print_critical_css', $css); goto vZS0w; YAtXP: $css = file_get_contents($critical_css); goto TrczM; fUjjX: HsfLj: goto LdsRQ; tctvf: Iz3Y7: goto jsdyk; YHOkw: ?>
    
    <?php  goto gIl5n; TrczM: $GLOBALS['hpp-criticalfile'] = $critical_css; goto Gjq7w; GBd6s: kh9Il: goto ecAqD; Zb0xy: IAHs9: goto M7F9Q; FzuBK: $critical_css = $this->get_criticalcss_path(); goto DEmCK; xdQOl: if (!(strpos($GLOBALS['hpp-criticalname'], 'page-') !== false)) { goto GXvUb; } goto mT27V; lKZe3: if ($critical_css && file_exists($critical_css) && hpp_shouldlazy()) { goto mxDtv; } goto bTdb8; hcHZg: echo '_HWIO._addjs("' . WP_ROCKET_ASSETS_JS_URL . '/lazyload/12.0/lazyload.min.js", "rocket-lazyload");'; goto ADbk6; pPjyZ: oAeBk: goto A08Dd; nXE2A: return; goto Ql80N; ecAqD: $attr = 'id="critical-css" name="' . $GLOBALS['hpp-criticalname'] . '"'; goto xdQOl; Ojngr: $js .= '_HWIO.data.__debug=1;'; goto fUjjX; HuZcH: xuJa0: goto cGb2U; RbjoO: $GLOBALS['hpp-head-critical'] = ob_get_clean(); goto Vi1jv; vZS0w: if (!isset($GLOBALS['hpp-criticalfont'])) { goto kh9Il; } goto MnmA8; Vi1jv: $js = file_get_contents(file_exists(dirname(__DIR__) . '/asset/init.min.js') ? dirname(__DIR__) . '/asset/init.min.js' : dirname(__DIR__) . '/asset/init.js'); goto FjX0y; ypSI0: printf('<meta name="critical-css-name" content="%s"/>', $GLOBALS['hpp-criticalname']); goto Zb0xy; GrYNP: echo 'window.lazyLoadOptions={elements_selector:"img[data-lazy-src],.rocket-lazyload",data_src:"lazy-src",data_srcset:"lazy-srcset",data_sizes:"lazy-sizes",skip_invisible:!1,class_loading:"lazyloading",class_loaded:"lazyloaded",threshold:300,callback_load:function(a){"IFRAME"===a.tagName&&"fitvidscompatible"==a.dataset.rocketLazyload&&a.classList.contains("lazyloaded")&&void 0!==window.jQuery&&jQuery.fn.fitVids&&jQuery(a).parent().fitVids()}},window.addEventListener("LazyLoad::Initialized",function(a){var e=a.detail.instance;if(window.MutationObserver){new MutationObserver(function(a){a.forEach(function(a){a.addedNodes.forEach(function(a){"function"==typeof a.getElementsByTagName&&(imgs=a.getElementsByTagName("img"),iframes=a.getElementsByTagName("iframe"),rocket_lazy=a.getElementsByClassName("rocket-lazyload"),0===imgs.length&&0===iframes.length&&0===rocket_lazy.length||e.update())})})}),document.getElementsByTagName("body")[0];0}},!1);'; goto hcHZg; MnmA8: echo '<style media="not all">' . file_get_contents($GLOBALS['hpp-criticalfont']) . '</style>'; goto GBd6s; A08Dd: if (!hw_config('test')) { goto HsfLj; } goto Ojngr; ALEYv: do_action('print_critical_css', ''); goto ypSI0; bTdb8: if (!isset($GLOBALS['hpp-criticalname'])) { goto IAHs9; } goto ALEYv; M7F9Q: goto u5meh; goto eDVqN; zGLnY: if (!defined('WP_ROCKET_ASSETS_JS_URL')) { goto cQGsY; } goto GrYNP; eDVqN: mxDtv: goto YAtXP; eqfj3: if (hpp_shouldlazy()) { goto ObKmG; } goto nXE2A; plWhF: $GLOBALS['hpp-head-js'] = '<script type="text/javascript">' . $js . ' _HWIO.ajax=' . json_encode($hppdt) . ';' . $initjs . '</script>'; goto ogKDO; Ql80N: ObKmG: goto FzuBK; aofLm: echo '_HWIO._addjs("' . HS_PLUGIN_URL . '/lib/asset/js.js","lazysizes");'; goto BexKR; ADbk6: cQGsY: goto aofLm; Tj2SL: print_r('<style ' . $attr . '>' . apply_filters('hpp_critical_css', $css, $critical_css) . '</style>'); goto FEn34; BexKR: echo '</script>'; goto tctvf; DEmCK: $hppdt = ['ajax_url' => admin_url('admin-ajax.php')]; goto dFBgc; ogKDO: ?>
  <?php  goto YHOkw; FjX0y: if (!('lazy' != hw_config('lazy_class'))) { goto oAeBk; } goto tnRjb; jsdyk: if (!isset($_GET['cls'])) { goto xuJa0; } goto i52m1; mT27V: $upload_dir = wp_upload_dir(); goto q8bBK; tnRjb: $js = str_replace('"lazy"', '"' . hw_config('lazy_class') . '"', $js); goto pPjyZ; E0fn5: do_action('hpp_print_initjs'); goto c2z2m; cGb2U: } function hpp_print_footer() { ob_start(); } function hpp_print_footer_end() { goto tnaan; K_SOr: if (is_singular()) { goto bqbhO; } goto hj4N6; gF5rD: bdaQ4: goto MjmZB; FlkjS: if (!$refresh) { goto bdaQ4; } goto IZwY8; s7l_z: printf('<link rel="next" href="%s">', hpp_current_url() . '?hpp_next=1&' . http_build_query($json)); goto Bo3ct; coo63: bqbhO: goto xXdyw; L0pLd: $ajx['info'] = $json; goto s7l_z; u9t0y: $refresh = 0; goto K_SOr; ZtTTG: $refresh = !$dt || !empty($_GET['hpp_sync']); goto jWiGW; Onvts: FH23d: goto PHW2Y; q32SL: ReQZG: goto LquJ9; kDYyC: bSLWW: goto qozD7; RLmOU: $json['id'] = $id; goto AWp2T; U7XdV: $id = get_queried_object()->term_id; goto Vnq3N; mzmED: update_post_meta($post->ID, 'hpp_lazy', hpp_serialize($hppjs)); goto q32SL; JpNy6: a2DUb: goto RLmOU; PHZji: $dt = get_post_meta($post->ID, 'hpp_lazy', true); goto ZtTTG; HSs9r: p2yaQ: goto L0pLd; xXdyw: global $post; goto PHZji; FkHRN: $hppjs = $GLOBALS['hppjs']; goto e1J4Q; cmE_4: $f = $upload_dir['basedir'] . '/pages/' . $id . '.json'; goto Vhp9c; f5Pwu: if (empty($GLOBALS['hppjs'])) { goto ZlFik; } goto FkHRN; uKNF8: if (!$refresh) { goto a2DUb; } goto DvbaP; IZwY8: update_term_meta($id, 'hpp_lazy', hpp_serialize($hppjs)); goto gF5rD; ucodh: oAzUR: goto U7XdV; hj4N6: if (is_tax() || is_category() || is_tag()) { goto oAzUR; } goto I4ZfE; ypHnU: $ajx = array(); goto f5Pwu; KzGBg: $GLOBALS['hppjs'] = array(); goto bQnDc; bQnDc: bJT_3: goto ypHnU; h2EJO: $id = md5($_SERVER['REQUEST_URI']); goto tYoRB; B7eBK: echo "<script>_HWIO.ajax=_HWIO.assign(_HWIO.ajax," . json_encode($ajx) . ")</script>"; goto Onvts; MjmZB: $json['term_id'] = $id; goto kDYyC; YVrYx: if (empty($ajx)) { goto FH23d; } goto B7eBK; qozD7: goto p2yaQ; goto coo63; tYoRB: $upload_dir = wp_upload_dir(); goto cmE_4; jWiGW: if (!$refresh) { goto ReQZG; } goto mzmED; DvbaP: file_put_contents($f, hpp_serialize($hppjs)); goto JpNy6; Bo3ct: ZlFik: goto YVrYx; I4ZfE: if (!isset($_SERVER['REQUEST_URI'])) { goto Ql5Qp; } goto h2EJO; XebQL: goto bSLWW; goto ucodh; VFZiW: $refresh = !$dt || !empty($_GET['hpp_sync']); goto FlkjS; Vnq3N: $dt = get_term_meta($id, 'hpp_lazy', 1); goto VFZiW; LquJ9: $json['post_id'] = $post->ID; goto HSs9r; e1J4Q: $json = array(); goto u9t0y; tnaan: if (isset($GLOBALS['hppjs'])) { goto bJT_3; } goto KzGBg; AWp2T: Ql5Qp: goto XebQL; Vhp9c: $refresh = !file_exists($f) || !empty($_GET['hpp_sync']); goto uKNF8; PHW2Y: } static function flush_dynamic_content($id, $type = 'post') { goto lyaXv; M2mSA: $wpdb->update($wpdb->prefix . 'termmeta', ['meta_value' => ''], ['meta_key' => 'hpp_lazy', 'term_id' => $id]); goto nhfUa; nhfUa: kbuqt: goto dWbP9; cZsoT: $wpdb->update($wpdb->prefix . 'postmeta', ['meta_value' => ''], ['meta_key' => 'hpp_lazy', 'post_id' => $id]); goto CCXhR; lyaXv: global $wpdb; goto IcRIB; dWbP9: hpp_purge_cache(); goto z8odi; CCXhR: adtDP: goto U5MBw; U5MBw: if (!($type == 'term')) { goto kbuqt; } goto M2mSA; IcRIB: if (!($type == 'post')) { goto adtDP; } goto cZsoT; z8odi: } function hpp_print_scripts() { goto C4mA_; MG9hw: echo <<<EOF
  <script>var _HWIO={
    readyjs: function(cb,cb1){try{(typeof cb=='function'?cb:cb1)()}catch(e){console.log(e)}},
    docReady:function(cb){cb()}
  };
EOF;
goto KleJO; S1YDJ: echo '<style id="hqcss-admin">' . file_get_contents(HS_LIB_DIR . '/asset/admin.css') . '</style>'; goto MG9hw; alD3W: if (!(!is_admin() && !in_array($GLOBALS['pagenow'], array('wp-login.php', 'wp-register.php')) || $fired)) { goto kOwWV; } goto jZzhD; jZzhD: return; goto ZJYHa; C4mA_: static $fired = 0; goto VujUw; KleJO: printf('setTimeout(function(){
        (function(d, s, id,w) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;js.async = 0;
        js.src = "%s";
        fjs.parentNode.insertBefore(js, fjs);
        }(document, "script", "lazysizes", window));
        },1000);</script>', HS_PLUGIN_URL . '/lib/asset/js.js'); goto X6e2M; iNChV: $fired = 1; goto S1YDJ; VujUw: return; goto alD3W; ZJYHa: kOwWV: goto iNChV; X6e2M: } function hpp_dyna_content() { goto mFjbd; Ui7cv: $file = $upload_dir['basedir'] . '/pages/' . $_GET['id'] . '.json'; goto TfmX7; BnSiQ: goto TGz3X; goto qo68L; oWi_e: if (isset($_GET['post_id'])) { goto iYwqM; } goto hC5Y2; sU6AB: $dt = $dt ? hpp_unserialize($dt) : []; goto uTIOU; ts4gU: die; goto geHC3; qo68L: u46go: goto MYDVE; Wv6DE: $dt = get_post_meta($_GET['post_id'], 'hpp_lazy', true); goto WvyDr; MYDVE: $dt = get_term_meta($_GET['term_id'], 'hpp_lazy', true); goto qXwzG; uTIOU: wp_send_json_success($dt); goto ts4gU; mFjbd: $dt = ''; goto xdB43; YSrbH: s1ABQ: goto BnSiQ; xJsy1: iYwqM: goto Wv6DE; TfmX7: $dt = file_exists($file) ? file_get_contents($file) : ''; goto YSrbH; xdB43: if (isset($_GET['term_id'])) { goto u46go; } goto oWi_e; WvyDr: TGz3X: goto sU6AB; hC5Y2: if (!isset($_GET['id'])) { goto s1ABQ; } goto yjLKU; yjLKU: $upload_dir = wp_upload_dir(); goto Ui7cv; qXwzG: goto TGz3X; goto xJsy1; geHC3: } function ajax_generate_css() { goto Hk7XN; eAn1V: update_option('hpp_css_auto', time()); goto gia0l; Nm5qx: wp_send_json_success(['msg' => 'exist']); goto di6sg; bSwk5: uQK9b: goto ndtb3; BQ3hP: if (!(strpos($name, 'page-') === false && file_exists($upload_dir['basedir'] . '/critical-css/' . $name0 . '.css') || file_exists($upload_dir['basedir'] . '/critical-css/' . $name . '.css'))) { goto W3RFL; } goto Nm5qx; wLnBE: if (apply_filters('hpp_allow_generate_css', false)) { goto rkvAz; } goto FRyuG; ybLs_: if (!(time() - get_option('hpp_css_auto') >= 7 * 24 * 60 * 60)) { goto N9Iba; } goto HkYAG; FRyuG: wp_send_json_error(['error' => 'use css tool only']); goto ywL_t; WgcK8: wp_send_json_success(['msg' => 'generated', 'css' => 1]); goto B9nsi; QkiMe: if (!($fetch && rand() % 2 == 0)) { goto rmcjn; } goto PwoRA; GSyDG: $p = parse_url($l); goto qZtx2; Ht0v2: hpp_save_criticalcss($out, $name, $name0, $p['path']); goto WgcK8; FcIkx: if (!(!$name || !$l || !filter_var($l, FILTER_VALIDATE_URL))) { goto DvdGp; } goto X5z6b; y1rzV: goto KYCBi; goto NCL0c; iGqz2: zO0Vl: goto onlcF; tBEFj: $name0 = $_POST['name0']; goto pgiNs; tuN1R: file_put_contents(WP_PLUGIN_DIR . '/wp2speed/lib/asset/custom.js', str_replace('_HWIO.data.gencss=1', '_HWIO.data.gencss=0', $str)); goto TfdCd; qZtx2: $domain = $p['host']; goto AeqHV; Na0o_: q1SZn: goto YrTAu; B9nsi: ue2aY: goto jz1CZ; PwoRA: $out = hpp_curl_get("https://ppcurl.vercel.app/criticalcss/{$domain}/{$name}/?ip={$client_ip}&url={$l}&__t=" . time()); goto XuqmN; MpPRD: DvdGp: goto GSyDG; XuqmN: if (!(!empty($out) && !hpp_isJson($out))) { goto ue2aY; } goto Ht0v2; qXexo: $fetch = isset($_POST['fetch']) ? (int) $_POST['fetch'] : 0; goto NOeo8; QY3Es: $out = hpp_curl_get($rest); goto W6blw; lV16v: wp_send_json_success($json); goto BW72v; di6sg: W3RFL: goto wLnBE; wz8ew: $json = array_merge($json, hpp_array_exclude_keys($r, ['domain', 'url'])); goto Jx01r; jN0dJ: $rest = "https://script.google.com/macros/s/" . hw_config('license_key') . "/exec?key={$l}&data=" . base64_encode(json_encode(['url' => $l, 'file' => $name, 'ip' => $client_ip, 'base' => site_url('/'), 'verify' => 0])) . "&token=" . time(); goto QY3Es; X5z6b: wp_send_json_error(['error' => 'wrong params']); goto MpPRD; YrTAu: $json = ['domain' => $domain, 'url' => $l, 'client_ip' => $client_ip]; goto d320H; csoeb: if (!($fetch || (int) get_option('hpp_css_auto_end'))) { goto hLazC; } goto E7Hne; PZK18: $r = json_decode($out, true); goto WT5E7; gia0l: KYCBi: goto lV16v; TfdCd: bPrlN: goto Vbrtv; pgiNs: goto q1SZn; goto bSwk5; d320H: $upload_dir = wp_upload_dir(); goto BQ3hP; ywL_t: rkvAz: goto QkiMe; SnhUc: if (!(strpos($str, '_HWIO.data.gencss=1') !== false)) { goto bPrlN; } goto tuN1R; HkYAG: $str = file_get_contents(WP_PLUGIN_DIR . '/wp2speed/lib/asset/custom.js'); goto SnhUc; ndtb3: $name0 = explode('-', $name); goto Rw1_0; onlcF: if (!get_option('hpp_css_auto')) { goto mTVrD; } goto ybLs_; Vbrtv: update_option('hpp_css_auto_end', 1); goto rcH3D; rcH3D: N9Iba: goto y1rzV; Jx01r: eHrSu: goto iGqz2; E7Hne: wp_send_json_success(['msg' => 'generating']); goto zN7IK; zN7IK: hLazC: goto jN0dJ; lyHiA: $json = []; goto FcIkx; Hk7XN: $l = isset($_POST['url']) ? $_POST['url'] : ''; goto UTqmX; W6blw: if (!(!$fetch && hpp_isJson($out))) { goto zO0Vl; } goto PZK18; jz1CZ: rmcjn: goto csoeb; WT5E7: if (!is_array($r)) { goto eHrSu; } goto wz8ew; UTqmX: $name = isset($_POST['name']) ? $_POST['name'] : ''; goto qXexo; Rw1_0: array_pop($name0); goto Cns7u; AeqHV: if (empty($_POST['name0'])) { goto uQK9b; } goto tBEFj; NOeo8: $post_id = !empty($_POST['post_id']) ? (int) $_POST['post_id'] : 0; goto prFWF; prFWF: $client_ip = !empty($_POST['client_ip']) ? $_POST['client_ip'] : hpp_getClientIP(); goto lyHiA; NCL0c: mTVrD: goto eAn1V; Cns7u: $name0 = join('-', $name0); goto Na0o_; BW72v: } function add_image_class($class) { goto QuQfG; gSf8F: return $class; goto PNTn9; CJU7_: $class = ' ' . $lazyclass . ' ' . $class; goto mwiwf; QuQfG: $lazyclass = hw_config('lazy_class'); goto Njaeq; Njaeq: if (!(hpp_shouldlazyload() && strpos($class, $lazyclass) === false)) { goto sonnj; } goto CJU7_; mwiwf: sonnj: goto gSf8F; PNTn9: } function filter_get_attachment_image_attributes($attr, $attachment, $size) { goto loIXX; S6id3: $attr['class'] = ''; goto i0YRV; E9OTD: if (isset($attr['class'])) { goto duiEb; } goto S6id3; gt_Ud: DFwtb: goto fgOSW; KTael: dA1No: goto aYPQp; CF2nB: $attr['itemprop'] = 'image'; goto ym0eF; aYPQp: goto s3TBE; goto XMOX9; tDC7Z: if (isset($attr['data-src'])) { goto x4Urd; } goto Mvkrg; JAn0C: xBjql: goto MuK4T; Mvkrg: return $attr; goto U17NP; ym0eF: uPL1Q: goto E9OTD; y5KRc: unset($attr['srcset']); goto vtm0e; r_JOJ: $src = $attr['src']; goto hFP3V; EIFRB: $attr['src'] = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=='; goto cuqoL; of4bU: $base64 = apply_filters('hpp_defer_src_holder', ';base64,'); goto ueOyy; DiWrM: return $attr; goto gt_Ud; z56CO: $attr['data-sizes'] = $attr['sizes']; goto OuGDP; fgOSW: $transparent_srcset = 0; goto of4bU; VKOqq: koVwm: goto EIFRB; ueOyy: $class = hw_config('lazy_class'); goto Zoong; xrzrp: s3TBE: goto JKRiW; loIXX: if (!(!hpp_shouldlazyload() || apply_filters('hpp_disallow_lazyload_attr', false, $attr))) { goto DFwtb; } goto DiWrM; biymz: T5ZgJ: goto r_JOJ; hFP3V: goto koVwm; goto oqaDt; vtm0e: wqFgd: goto iNU1J; M8Uoj: $src = $attr['data-src']; goto VKOqq; cuqoL: $attr['data-src'] = $src; goto dkNmf; XMOX9: sov3V: goto z56CO; iNU1J: if (isset($attr['sizes'])) { goto sov3V; } goto cVZaO; oqaDt: x4Urd: goto M8Uoj; MuK4T: if (isset($attr['src']) && strpos($attr['src'], $base64) === false && strpos($attr['src'], ';base64,') === false) { goto T5ZgJ; } goto tDC7Z; OEMDA: $attr['data-sizes'] = 'auto'; goto KTael; OuGDP: unset($attr['sizes']); goto xrzrp; cVZaO: if (!isset($attr['data-srcset'])) { goto dA1No; } goto OEMDA; Zoong: if (isset($attr['itemprop'])) { goto uPL1Q; } goto CF2nB; U17NP: goto koVwm; goto biymz; rkKcf: if (!(strpos($attr['class'], ' ' . $class . ' ') === false)) { goto xBjql; } goto xozfO; dkNmf: if (!isset($attr['srcset'])) { goto wqFgd; } goto beP1i; i0YRV: duiEb: goto rkKcf; beP1i: $attr['data-srcset'] = $attr['srcset']; goto y5KRc; xozfO: $attr['class'] = ' ' . $class . ' ' . $attr['class']; goto JAn0C; JKRiW: return $attr; goto JReRB; JReRB: } function admin_init() { goto c71Oc; VcC6X: ZdcvE: goto Lg4tw; N33gK: hpp_purge_cache(); goto VcC6X; c71Oc: if (!(isset($_GET['action']) && in_array($_GET['action'], array('purge_cache')) || isset($_GET['page']) && $_GET['page'] == 'wpsupercache' && !empty($_GET['wp_delete_cache']) || isset($_GET['page']) && $_GET['page'] == 'w3tc_dashboard' && isset($_GET['w3tc_flush_all']))) { goto ZdcvE; } goto N33gK; Lg4tw: } function oembed_result($iframe_html, $video_url, $frame_attributes) { return hpp_lazy_video($iframe_html, 2); } function woocommerce_single_product_image_html($img, $post_id) { goto cRVUW; ijr31: return hpp_defer_img($img); goto EW8aY; cRVUW: if (hpp_shouldlazyload()) { goto eMSMo; } goto bCMd1; bCMd1: return $img; goto hTDyC; hTDyC: eMSMo: goto ijr31; EW8aY: } function woocommerce_single_product_image_thumbnail_html($html, $post_thumbnail_id) { goto QBtJN; vTtKI: return $html; goto nnF5R; nnF5R: ZpN1q: goto llkFU; QBtJN: if (hpp_shouldlazyload()) { goto ZpN1q; } goto vTtKI; llkFU: return hpp_defer_img($html); goto labag; labag: } function woocommerce_product_get_image($image, $obj, $size, $attr, $placeholder, $image_ = null) { goto DU8XQ; Pb2Gj: $class = hw_config('lazy_class'); goto LxlKW; ecl1I: goto fZdAu; goto qSTGX; fFzN8: $thumb = get_post_meta($obj->post->ID, '_thumbnail_ext_url', TRUE); goto Pb2Gj; ysO16: jsK_f: goto Xzi0a; THBIG: fZdAu: goto s9FP6; BlIGe: $image = '<img alt="' . (!empty($obj->post->post_title) ? esc_attr($obj->post->post_title) : ' ') . '" itemprop="image" class=" ' . $class . ' " src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-src="' . $thumb . '" />'; goto THBIG; Xzi0a: J_WtN: goto ecl1I; LxlKW: if (hpp_shouldlazyload()) { goto Ch_A2; } goto ydK6E; s9FP6: hIEQM: goto iiM0r; ydK6E: if (!is_admin()) { goto J_WtN; } goto yNnZ0; NhpLu: $image = '<img src="' . $thumb . '" data-src="' . $thumb . '" class="' . $class . '"/>'; goto ysO16; qSTGX: Ch_A2: goto BlIGe; DU8XQ: if (!(!$image || stripos($image, 'woocommerce-placeholder.png') !== false)) { goto hIEQM; } goto fFzN8; iiM0r: return $image; goto xc01S; yNnZ0: $screen = get_current_screen(); goto BPM6x; BPM6x: if (!($screen->base == 'post' && $screen->post_type == 'shop_order')) { goto jsK_f; } goto NhpLu; xc01S: } function script_loader_tag($tag, $handle, $src) { goto WH_hJ; QgbTi: return $tag; goto yMQX3; yxA1n: cGIn3: goto ZZLwe; ZZLwe: if (!(strpos($src, ' defer ') === false)) { goto SB527; } goto jKn2o; goj1Q: SB527: goto QgbTi; lW_8M: return '<script src="' . $src . '" async defer type="text/javascript"></script>' . "\n"; goto yxA1n; XtTKO: return $tag; goto imndx; jKn2o: $tag = str_replace('src=', 'async defer src=', $tag); goto goj1Q; imndx: OzTHx: goto IbHwe; WH_hJ: if (hpp_shouldlazy()) { goto OzTHx; } goto XtTKO; IbHwe: if (!(strpos($src, '/mmr/') !== false)) { goto cGIn3; } goto lW_8M; yMQX3: } function style_loader_tag($tag, $handle, $src, $media) { goto w5eUW; LRob_: if (!file_exists($css_file)) { goto lZK_7; } goto tTPkE; w5eUW: if (hpp_shouldlazy()) { goto tTl3G; } goto ppbYa; tTPkE: $tag = "<noscript>{$tag}</noscript>"; goto QQcaE; EGiCx: lZK_7: goto LnezV; CGVog: tTl3G: goto Bpb4S; J6BFI: $tag = self::defer_asset_html($tag, 'css'); goto Ls8Mz; Ls8Mz: $tag .= $_tag; goto uvLdy; QQcaE: goto QdHSz; goto EGiCx; Bpb4S: $css_file = $this->get_criticalcss_path(); goto LRob_; LnezV: $_tag = "<noscript>{$tag}</noscript>"; goto J6BFI; ppbYa: return $tag; goto CGVog; uvLdy: QdHSz: goto GvUYv; GvUYv: return $tag; goto Ll8sK; Ll8sK: } public static function defer_asset_html($tag, $tp) { goto RYH9a; c7L__: NYc48: goto HWG8L; RYH9a: if (!($tp == 'css')) { goto ysVB3; } goto jby5H; surH9: ysVB3: goto lR7IB; TKFPZ: $tag = str_replace(' src=', ' defer src=', $tag); goto cZ_cE; HWG8L: if (!(strpos($tag, ' defer') === false)) { goto HIchd; } goto TKFPZ; GaNm4: if (!(strpos($tag, 'stylesheet preload') === false)) { goto ayGjc; } goto t6b30; fTviA: return apply_filters('hpp_defer_html_tag', $tag, $tp); goto Acprb; TqbQV: Hz2H2: goto GaNm4; GcFKk: $tag = str_replace(' src=', ' async src=', $tag); goto c7L__; cZ_cE: HIchd: goto zzko9; jby5H: if (!(strpos($tag, ' as=') === false)) { goto Hz2H2; } goto hh0UR; t6b30: $tag = preg_replace('# rel=(\'|")(.+?)(\'|")#', ' rel="stylesheet preload prefetch"', $tag); goto P_62H; P_62H: ayGjc: goto surH9; lR7IB: if (!($tp == 'js')) { goto CJzt0; } goto MjJqi; zzko9: CJzt0: goto fTviA; MjJqi: if (!(strpos($tag, ' async') === false)) { goto NYc48; } goto GcFKk; hh0UR: $tag = str_replace('<link ', '<link as="style" onload="this.rel=\'stylesheet\';" ', $tag); goto TqbQV; Acprb: } public function filter_sidebar_content_start() { ob_start(); } public function filter_sidebar_content_end() { goto DwXLg; Twkv6: echo hpp_defer_content($content); goto R2OBJ; DwXLg: $content = ob_get_clean(); goto Twkv6; R2OBJ: unset($content); goto QgHv8; QgHv8: } } goto VDv0l; rSYDO: new HPP_Lazy(); goto r3BNC; VDv0l: if (is_admin()) { goto W0g_D; } goto rSYDO; r3BNC: W0g_D: