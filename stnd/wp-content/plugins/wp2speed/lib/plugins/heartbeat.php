<?php
/*by PenciDesign*/
 class Heartbeat { public $current_screen; public $current_query_string; public $settings = array(); public function __construct() { goto S66ss; KXEZT: add_filter('heartbeat_settings', array($this, 'maybe_modify'), 99, 1); goto D71bJ; R5BZq: $current_url = $_SERVER['REQUEST_URI'] . '?' . $_SERVER['QUERY_STRING']; goto B0DjU; gr4I3: add_action('admin_enqueue_scripts', array($this, 'maybe_disable'), 99); goto Zqqq9; jP7is: $current_url = $_SERVER['REQUEST_URI']; goto sN9Yj; sN9Yj: goto cnEqn; goto Sus2C; eRTtD: return; goto Yc8PC; Zqqq9: add_action('wp_enqueue_scripts', array($this, 'maybe_disable'), 99); goto KXEZT; B0DjU: cnEqn: goto JPN5t; Sus2C: YvhrE: goto R5BZq; Yc8PC: WeoMC: goto nFcF8; mJ1mU: if (!($this->current_screen == '/wp-admin/admin-ajax.php')) { goto WeoMC; } goto eRTtD; JPN5t: $this->current_screen = parse_url($current_url); goto mJ1mU; S66ss: if (!empty($_SERVER['QUERY_STRING'])) { goto YvhrE; } goto jP7is; nFcF8: $settings['rules'] = array(array('heartbeat_control_behavior' => 'modify', 'heartbeat_control_location' => array('admin', 'frontend', '/quanly/post.php'), 'heartbeat_control_frequency' => 300)); goto BYNNc; BYNNc: $this->settings = $settings['rules']; goto gr4I3; D71bJ: } public function check_location($locations) { goto OrpCg; VhDkH: goto ADlSN; goto y0na4; y0na4: AKMhH: goto wbTga; MCzit: mMKwU: goto k9iWh; wbTga: return true; goto ffLPd; Qzwp9: if (is_admin() && in_array('admin', $locations)) { goto AKMhH; } goto p4IFj; OrpCg: if (isset($this->current_screen['path']) && in_array($this->current_screen['path'], $locations)) { goto mMKwU; } goto femBt; UYFsl: return false; goto VxIwu; p4IFj: goto ADlSN; goto MCzit; ffLPd: ADlSN: goto UYFsl; femBt: if (!is_admin() && in_array('frontend', $locations)) { goto yDjwL; } goto Qzwp9; LsBhK: goto ADlSN; goto XdWzN; XdWzN: yDjwL: goto Pj4uA; k9iWh: return true; goto LsBhK; Pj4uA: return true; goto VhDkH; VxIwu: } public function maybe_disable() { foreach ($this->settings as $rule) { goto tfphP; fmYOt: if (!$this->check_location($rule['heartbeat_control_location'])) { goto hTOrf; } goto eG4rC; NCjZa: hTOrf: goto fQiQ_; eG4rC: wp_deregister_script('heartbeat'); goto XqCPh; fQiQ_: wGeyW: goto NDJ9n; NDJ9n: LZXMD: goto bcS_G; tfphP: if (!(array_key_exists('heartbeat_control_behavior', $rule) && $rule['heartbeat_control_behavior'] === 'disable')) { goto wGeyW; } goto fmYOt; XqCPh: return; goto NCjZa; bcS_G: } E03wV: } public function maybe_modify($settings) { goto yKmNH; dFsrc: eB_Pp: goto hIp_d; yKmNH: foreach ($this->settings as $rule) { goto cX_0S; INtqu: return $settings; goto ddEyD; cX_0S: if (!(array_key_exists('heartbeat_control_behavior', $rule) && $rule['heartbeat_control_behavior'] === 'modify')) { goto bI_ta; } goto ZSGCe; LE741: bI_ta: goto aEsPR; ktiw5: $settings['interval'] = intval($rule['heartbeat_control_frequency']); goto INtqu; aEsPR: Y3bVk: goto hS1bT; ZSGCe: if (!$this->check_location($rule['heartbeat_control_location'])) { goto OAANJ; } goto ktiw5; ddEyD: OAANJ: goto LE741; hS1bT: } goto dFsrc; hIp_d: return $settings; goto sq7ku; sq7ku: } } new Heartbeat();